function resizeWindow(){var a=jQuery(window).width(),b=jQuery(window).height();if(jQuery("#leftPanel, #rightContent").height(b),jQuery("#dimmer").width(a).height(b),360>=b)jQuery("#leftPanel .contentContainer").css({bottom:"0"});else{var c=jQuery("#leftPanel .contentContainer").height(),d=Math.floor(10/Math.pow(c/b,2.8)),e=b-(c+d);d>e&&(d=Math.floor(b/2-c)),jQuery("#leftPanel .contentContainer").css({bottom:d.toString()+"px"})}var f=jQuery("#leftPanel .contentContainer .new-user-form").width()+30;jQuery("#leftPanel .contentContainer .new-user-form").css({right:"-"+f.toString()+"px"})}function serverError(){alert("There was a problem with the server connection. Please try again later.")}!function(a,b){function c(b){var c=s(),d=c.querySelector("h2"),e=c.querySelector("p"),f=c.querySelector("button.cancel"),h=c.querySelector("button.confirm");if(d.innerHTML=x(b.title).split("\n").join("<br>"),e.innerHTML=x(b.text||"").split("\n").join("<br>"),b.text&&z(e),B(c.querySelectorAll(".icon")),b.type){for(var i=!1,j=0;j<q.length;j++)if(b.type===q[j]){i=!0;break}if(!i)return a.console.error("Unknown alert type: "+b.type),!1;var k=c.querySelector(".icon."+b.type);switch(z(k),b.type){case"success":v(k,"animate"),v(k.querySelector(".tip"),"animateSuccessTip"),v(k.querySelector(".long"),"animateSuccessLong");break;case"error":v(k,"animateErrorIcon"),v(k.querySelector(".x-mark"),"animateXMark");break;case"warning":v(k,"pulseWarning"),v(k.querySelector(".body"),"pulseWarningIns"),v(k.querySelector(".dot"),"pulseWarningIns")}}if(b.imageUrl){var l=c.querySelector(".icon.custom");l.style.backgroundImage="url("+b.imageUrl+")",z(l);var m=80,n=80;if(b.imageSize){var o=b.imageSize.split("x")[0],p=b.imageSize.split("x")[1];o&&p?(m=o,n=p,l.css({width:o+"px",height:p+"px"})):a.console.error("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+b.imageSize)}l.setAttribute("style",l.getAttribute("style")+"width:"+m+"px; height:"+n+"px")}c.setAttribute("data-has-cancel-button",b.showCancelButton),b.showCancelButton?f.style.display="inline-block":B(f),b.cancelButtonText&&(f.innerHTML=x(b.cancelButtonText)),b.confirmButtonText&&(h.innerHTML=x(b.confirmButtonText)),h.style.backgroundColor=b.confirmButtonColor,g(h,b.confirmButtonColor),c.setAttribute("data-allow-ouside-click",b.allowOutsideClick);var r=b.doneFunction?!0:!1;c.setAttribute("data-has-done-function",r),c.setAttribute("data-timer",b.timer)}function d(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e}function e(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function f(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16):null}function g(a,b){var c=f(b);a.style.boxShadow="0 0 2px rgba("+c+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"}function h(){var a=s();E(t(),10),z(a),v(a,"showSweetAlert"),w(a,"hideSweetAlert"),k=b.activeElement;var c=a.querySelector("button.confirm");c.focus(),setTimeout(function(){v(a,"visible")},500);var d=a.getAttribute("data-timer");"null"!==d&&""!==d&&(a.timeout=setTimeout(function(){i()},d))}function i(){var c=s();F(t(),5),F(c,5),w(c,"showSweetAlert"),v(c,"hideSweetAlert"),w(c,"visible");var d=c.querySelector(".icon.success");w(d,"animate"),w(d.querySelector(".tip"),"animateSuccessTip"),w(d.querySelector(".long"),"animateSuccessLong");var e=c.querySelector(".icon.error");w(e,"animateErrorIcon"),w(e.querySelector(".x-mark"),"animateXMark");var f=c.querySelector(".icon.warning");w(f,"pulseWarning"),w(f.querySelector(".body"),"pulseWarningIns"),w(f.querySelector(".dot"),"pulseWarningIns"),a.onkeydown=m,b.onclick=l,k&&k.focus(),n=void 0,clearTimeout(c.timeout)}function j(){var a=s();a.style.marginTop=D(s())}var k,l,m,n,o=".sweet-alert",p=".sweet-overlay",q=["error","warning","info","success"],r={title:"",text:"",type:null,allowOutsideClick:!1,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null},s=function(){return b.querySelector(o)},t=function(){return b.querySelector(p)},u=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},v=function(a,b){u(a,b)||(a.className+=" "+b)},w=function(a,b){var c=" "+a.className.replace(/[\t\r\n]/g," ")+" ";if(u(a,b)){for(;c.indexOf(" "+b+" ")>=0;)c=c.replace(" "+b+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}},x=function(a){var c=b.createElement("div");return c.appendChild(b.createTextNode(a)),c.innerHTML},y=function(a){a.style.opacity="",a.style.display="block"},z=function(a){if(a&&!a.length)return y(a);for(var b=0;b<a.length;++b)y(a[b])},A=function(a){a.style.opacity="",a.style.display="none"},B=function(a){if(a&&!a.length)return A(a);for(var b=0;b<a.length;++b)A(a[b])},C=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},D=function(a){a.style.left="-9999px",a.style.display="block";var b,c=a.clientHeight;return b="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(a).getPropertyValue("padding"),10):parseInt(a.currentStyle.padding),a.style.left="",a.style.display="none","-"+parseInt(c/2+b)+"px"},E=function(a,b){if(+a.style.opacity<1){b=b||16,a.style.opacity=0,a.style.display="block";var c=+new Date,d=function(){a.style.opacity=+a.style.opacity+(new Date-c)/100,c=+new Date,+a.style.opacity<1&&setTimeout(d,b)};d()}a.style.display="block"},F=function(a,b){b=b||16,a.style.opacity=1;var c=+new Date,d=function(){a.style.opacity=+a.style.opacity-(new Date-c)/100,c=+new Date,+a.style.opacity>0?setTimeout(d,b):a.style.display="none"};d()},G=function(c){if(MouseEvent){var d=new MouseEvent("click",{view:a,bubbles:!1,cancelable:!0});c.dispatchEvent(d)}else if(b.createEvent){var e=b.createEvent("MouseEvents");e.initEvent("click",!1,!1),c.dispatchEvent(e)}else b.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick()},H=function(b){"function"==typeof b.stopPropagation?(b.stopPropagation(),b.preventDefault()):a.event&&a.event.hasOwnProperty("cancelBubble")&&(a.event.cancelBubble=!0)};a.sweetAlertInitialize=function(){var a='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert" tabIndex="-1"><div class="icon error"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div><div class="icon warning"> <span class="body"></span> <span class="dot"></span> </div> <div class="icon info"></div> <div class="icon success"> <span class="line tip"></span> <span class="line long"></span> <div class="placeholder"></div> <div class="fix"></div> </div> <div class="icon custom"></div> <h2>Title</h2><p>Text</p><button class="cancel" tabIndex="2">Cancel</button><button class="confirm" tabIndex="1">OK</button></div>',c=b.createElement("div");c.innerHTML=a,b.body.appendChild(c)},a.sweetAlert=a.swal=function(){function f(b){var c=b||a.event,d=c.keyCode||c.which;if(-1!==[9,13,32,27].indexOf(d)){for(var e=c.target||c.srcElement,f=-1,h=0;h<y.length;h++)if(e===y[h]){f=h;break}9===d?(e=-1===f?w:f===y.length-1?y[0]:y[f+1],H(c),e.focus(),g(e,o.confirmButtonColor)):(e=13===d||32===d?-1===f?w:void 0:27!==d||x.hidden||"none"===x.style.display?void 0:x,void 0!==e&&G(e,c))}}function k(b){var c=b||a.event,d=c.target||c.srcElement,e=c.relatedTarget,f=u(p,"visible");if(f){var g=-1;if(null!==e){for(var h=0;h<y.length;h++)if(e===y[h]){g=h;break}-1===g&&d.focus()}else n=d}}if(void 0===arguments[0])return a.console.error("sweetAlert expects at least 1 attribute!"),!1;var o=e({},r);switch(typeof arguments[0]){case"string":o.title=arguments[0],o.text=arguments[1]||"",o.type=arguments[2]||"";break;case"object":if(void 0===arguments[0].title)return a.console.error('Missing "title" argument!'),!1;o.title=arguments[0].title,o.text=arguments[0].text||r.text,o.type=arguments[0].type||r.type,o.allowOutsideClick=arguments[0].allowOutsideClick||r.allowOutsideClick,o.showCancelButton=void 0!==arguments[0].showCancelButton?arguments[0].showCancelButton:r.showCancelButton,o.closeOnConfirm=void 0!==arguments[0].closeOnConfirm?arguments[0].closeOnConfirm:r.closeOnConfirm,o.closeOnCancel=void 0!==arguments[0].closeOnCancel?arguments[0].closeOnCancel:r.closeOnCancel,o.timer=arguments[0].timer||r.timer,o.confirmButtonText=r.showCancelButton?"Confirm":r.confirmButtonText,o.confirmButtonText=arguments[0].confirmButtonText||r.confirmButtonText,o.confirmButtonColor=arguments[0].confirmButtonColor||r.confirmButtonColor,o.cancelButtonText=arguments[0].cancelButtonText||r.cancelButtonText,o.imageUrl=arguments[0].imageUrl||r.imageUrl,o.imageSize=arguments[0].imageSize||r.imageSize,o.doneFunction=arguments[1]||null;break;default:return a.console.error('Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}c(o),j(),h();for(var p=s(),q=function(b){var c=b||a.event,e=c.target||c.srcElement,f="confirm"===e.className,g=u(p,"visible"),h=o.doneFunction&&"true"===p.getAttribute("data-has-done-function");switch(c.type){case"mouseover":f&&(e.style.backgroundColor=d(o.confirmButtonColor,-.04));break;case"mouseout":f&&(e.style.backgroundColor=o.confirmButtonColor);break;case"mousedown":f&&(e.style.backgroundColor=d(o.confirmButtonColor,-.14));break;case"mouseup":f&&(e.style.backgroundColor=d(o.confirmButtonColor,-.04));break;case"focus":var j=p.querySelector("button.confirm"),k=p.querySelector("button.cancel");f?k.style.boxShadow="none":j.style.boxShadow="none";break;case"click":if(f&&h&&g)o.doneFunction(!0),o.closeOnConfirm&&i();else if(h&&g){var l=String(o.doneFunction).replace(/\s/g,""),m="function("===l.substring(0,9)&&")"!==l.substring(9,10);m&&o.doneFunction(!1),o.closeOnCancel&&i()}else i()}},t=p.querySelectorAll("button"),v=0;v<t.length;v++)t[v].onclick=q,t[v].onmouseover=q,t[v].onmouseout=q,t[v].onmousedown=q,t[v].onfocus=q;l=b.onclick,b.onclick=function(b){var c=b||a.event,d=c.target||c.srcElement,e=p===d,f=C(p,d),g=u(p,"visible"),h="true"===p.getAttribute("data-allow-ouside-click");!e&&!f&&g&&h&&i()};var w=p.querySelector("button.confirm"),x=p.querySelector("button.cancel"),y=p.querySelectorAll("button:not([type=hidden])");m=a.onkeydown,a.onkeydown=f,w.onblur=k,x.onblur=k,a.onfocus=function(){a.setTimeout(function(){void 0!==n&&(n.focus(),n=void 0)},0)}},a.swal.setDefaults=function(a){if(!a)throw new Error("userParams is required");if("object"!=typeof a)throw new Error("userParams has to be a object");e(r,a)},function(){"complete"===b.readyState||"interactive"===b.readyState&&b.body?a.sweetAlertInitialize():b.addEventListener?b.addEventListener("DOMContentLoaded",function(){b.removeEventListener("DOMContentLoaded",arguments.callee,!1),a.sweetAlertInitialize()},!1):b.attachEvent&&b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&(b.detachEvent("onreadystatechange",arguments.callee),a.sweetAlertInitialize())})}()}(window,document);var _home={reg:{validate:function(a){var b={name:{value:a.name,pass:!0},email:{value:a.email,pass:!0},password:{value:a.password,pass:!0}},c=b.name.value.trim();if(0==c.length)return b.name.value=c,b.name.pass=!1,b.name.reason="Empty",b;if(c.split(" ").length<2)return b.name.pass=!1,b.name.reason="First and last name required",b;var d=b.email.value.trim();if(0==d.length)return b.email.value=d,b.email.pass=!1,b.email.reason="Empty",b;if(!/[^@]+@[^@]+/i.test(d))return b.email.pass=!1,b.email.reason="Invalid",b;var e=b.password.value;return/[^`~\!@#\$%\^&\*\(\)_\+\-=\[\]{}\\|;':",\.\/<>\?a-z0-9]/i.test(e)?(b.password.pass=!1,b.password.reason="Contains invalid characters",b):b},create:function(a,b){var c=_home.reg.validate(a),d={pass:!0,info:c};return d.info.name.pass&&d.info.email.pass&&d.info.password.pass?void jQuery.ajax({url:"",type:"POST",data:d.info,dataType:"json",success:function(a){console.log(a),b(d)},fail:function(){},success:function(){}}):(d.pass=!1,b(d))}},login:function(a){a&&(a=jQuery.extend({success:function(){},complete:function(){}},a),jQuery.ajax({url:"/pubcon/login.php",type:"POST",dataType:"json",data:{user:a.user,password:a.password},success:function(b){a.success(b)},fail:function(){},complete:function(){"function"==typeof a.callback&&a.callback()}}))}};jQuery(document).ready(function(){function a(){function a(){jQuery("#newUserGo").children(".button_loader").hide(),jQuery("#newUserGo").children(".button_text").hide(),jQuery("#newUserGo").children(".button_check").hide(),jQuery("#newUserGo").children(".button_fail").css({display:"block"}),jQuery("#newUserGo").removeAttr("disabled"),j=!1}function c(c){jQuery(".regNameErrMsg").text(c),jQuery(".regNameErrMsg").css("display","block"),b(),a()}function d(c){jQuery(".regEmailErrMsg").text(c),jQuery(".regEmailErrMsg").css("display","block"),b(),a()}function f(c){jQuery(".regPassErrMsg").text(c),jQuery(".regPassErrMsg").css("display","block"),b(),a()}var g=jQuery("#regName").val(),h=jQuery("#regEmail").val(),i=jQuery("#regPass").val(),j=!0;return g.length<3?c("Name is too short"):g.length>20?c("Name is too long"):-1==g.indexOf(" ")&&c("Invalid name"),0==h.length?d("Email is empty"):-1==h.indexOf("@")?d("Invalid email"):h.indexOf(" ")>0?d("Invalid email"):!h.split("@")[0].length>0?d("Invalid email"):!h.split("@")[1].length>0&&d("Invalid email"),i.length<1?f("Password is empty"):i.length<3?f("Password is too short"):"password"==i&&f('"password"? Really?'),j?void jQuery.ajax({url:"/pubcon/new.php",type:"POST",data:{post_sess_id:e,post_reg_name:g,post_reg_email:h,post_reg_pass:i}}).success(function(a){try{var b=jQuery.parseJSON(a)}catch(c){return console.log("---"),console.log("ERROR"),console.log("> "+c),console.log("> "+a),void console.log("---")}return"invalid sess_id"==b.status?void serverError():"email taken"==b.status?(console.log(b.message),void d(b.message)):(jQuery("#newUserGo").children(".button_loader").hide(),jQuery("#newUserGo").children(".button_text").hide(),jQuery("#newUserGo").children(".button_fail").hide(),jQuery("#newUserGo").children(".button_check").css({display:"block"}),void location.reload())}).fail(function(){serverError()}):!1}function b(){var a=jQuery(".new-user-form > .regNameErrMsg").innerWidth()+20;jQuery(".new-user-form > .regNameErrMsg").css({right:"-"+a+"px"});var a=jQuery(".new-user-form .regEmailErrMsg").innerWidth()+20;jQuery(".new-user-form .regEmailErrMsg").css({right:"-"+a+"px"});var a=jQuery(".new-user-form .regPassErrMsg").innerWidth()+20;jQuery(".new-user-form .regPassErrMsg").css({right:"-"+a+"px"})}resizeWindow(),jQuery(window).resize(function(){resizeWindow()});var c=0,d=setInterval(function(){resizeWindow(),c++,c>=15&&clearInterval(d)},1e3),e=jQuery("body > input").val();jQuery("#regName").focus(function(){jQuery("#leftPanel .contentContainer .new-user-form .hidden-fields").slideDown(250),b(),jQuery(this).unbind("focus")}),jQuery("#regPass").keyup(function(){jQuery("#regName").val().length<1||jQuery("#regEmail").val().length<1||jQuery("#regPass").val().length<1||(jQuery("#regName").val().length>20,-1==jQuery("#regEmail").val().indexOf("@")||jQuery("#regEmail").val().split("@")[0].length>0&&jQuery("#regEmail").val().split("@")[1].length>0)}),jQuery("#newUserGo").click(function(){var b=jQuery(this);b.is(":disabled")||(jQuery(".errMsg").hide(),b.attr("disabled","disabled"),b.children(".button_fail").hide(),b.children(".button_check").hide(),b.children(".button_text").hide(),b.children(".button_loader").css({display:"block"}),a())}),jQuery("#regName, #regEmail, #regPass").keypress(function(b){if(13==b.which){if(jQuery("#newUserGo").is(":disabled"))return;jQuery(".errMsg").hide(),jQuery("#newUserGo").attr("disabled","disabled"),jQuery("#newUserGo").children(".button_fail").hide(),jQuery("#newUserGo").children(".button_check").hide(),jQuery("#newUserGo").children(".button_text").hide(),jQuery("#newUserGo").children(".button_loader").css({display:"block"}),a()}}),jQuery("#loginButton").click(function(){var a=jQuery(this);if(!a.isDisabled()){a.disable(),a.find(".button_text").hide(),a.find(".button_loader").css("display","block");var b=jQuery("#loginEmail").val(),c=jQuery("#loginPass").val();_home.login({user:b,password:c,success:function(a){a.result&&window.location.reload()},callback:function(){a.enable(),a.find(".button_loader").hide(),a.find(".button_text").show()}})}}),jQuery("#loginEmail, #loginPass").keypress(function(a){13==a.which&&jQuery("#loginButton").trigger("click")})}),function(){window.pnalert=function(a){var b=_.extend({title:"Oops..",msg:"An unknown error has occurred!",type:"error",btnTxt:"Refresh Page",onConfirm:function(){window.location.reload()}},a);switch(b.error){case"500":b.msg="An error has occurred on the server!",b.btnTxt="Ok",b.onConfirm=null;break;case"timeout":b.title="Request timeout",b.msg="Your request has timed out! Please try again.",b.btnTxt="Ok",b.onConfirm=null;break;case"network":b.title="Network error",b.msg="There was a problem with your network. Make sure you are connected to the internet.",b.btnTxt="Ok",b.onConfirm=null;break;case"auth":b.title="Authentication error",b.msg="You are not authenticated to perform this action. Please login.",b.btnTxt="Login";break;case"503":b.title="Our servers are struggling!",b.msg="There are too many hits on our servers at the moment. Please try again.",b.btnTxt="Ok",b.onConfirm=null;break;case"login":b.title="Wrong login or password",b.msg="The username/email or password you entered did not match.",b.btnTxt="Try again",b.onConfirm=null}window.sweetAlert({title:b.title,text:b.msg,type:b.type,confirmButtonText:b.btnTxt},function(a){a&&"function"==typeof b.onConfirm&&b.onConfirm()})}}();